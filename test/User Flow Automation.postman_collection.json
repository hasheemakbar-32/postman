{
  "info": {
    "_postman_id": "97605c50-aafe-475c-af72-128b83dbc10c",
    "name": "User Flow Automation",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "39075278"
  },
  "item": [
    {
      "name": "Login (Extract token)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// Parse the JSON response",
              "const jsonData = pm.response.json();",
              "",
              "// Test that the token exists and is not empty",
              "pm.test(\"Response has a valid token\", function () {",
              "    pm.expect(jsonData).to.have.property('token');",
              "    pm.expect(jsonData.token).to.not.be.empty;",
              "});",
              "",
              "// Store the token in the environment variable",
              "pm.environment.set('token', jsonData.token);",
              "",
              "console.log(\"Token value:\", jsonData.token);"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "// Generate current timestamp",
              "const now = new Date();",
              "",
              "// Get individual components",
              "const month = String(now.getMonth() + 1).padStart(2, '0');",
              "const day = String(now.getDate()).padStart(2, '0');",
              "const year = now.getFullYear();",
              "const hours = String(now.getHours()).padStart(2, '0');",
              "const minutes = String(now.getMinutes()).padStart(2, '0');",
              "const seconds = String(now.getSeconds()).padStart(2, '0');",
              "",
              "// Format as MM:DD:yyyy HH:mm:ss",
              "const formattedTimestamp = `${month}:${day}:${year} ${hours}:${minutes}:${seconds}`;",
              "",
              "// Store in environment variable",
              "pm.environment.set('Time Now', formattedTimestamp);",
              "",
              "console.log('Time Now:', formattedTimestamp);"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "x-api-key",
            "value": "reqres_8d68828817d546fa87662ff2761f343d",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"email\": \"eve.holt@reqres.in\",\r\n    \"password\": \"cityslicka\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/login",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "login"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Create User",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "// Parse the JSON response",
              "const jsonData = pm.response.json();",
              "",
              "// Test that the id exists in the response",
              "pm.test(\"Response has a valid id\", function () {",
              "    pm.expect(jsonData).to.have.property('id');",
              "    pm.expect(jsonData.id).to.not.be.empty;",
              "});",
              "",
              "// Extract the id and store it in the environment variable",
              "pm.environment.set('userId', jsonData.id);",
              "",
              "// Print the userId value to the console",
              "console.log(\"userId value:\", jsonData.id);"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-api-key",
            "value": "reqres_8d68828817d546fa87662ff2761f343d",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"John Doe\",\n  \"job\": \"QA Engineer\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/users",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "users"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Update User",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {\r",
              "    pm.response.to.have.status(200);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token}}",
              "type": "string"
            }
          ]
        },
        "method": "PATCH",
        "header": [
          {
            "key": "x-api-key",
            "value": "reqres_8d68828817d546fa87662ff2761f343d",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\r\n  \"name\": \"John Moh\",\r\n  \"job\": \"App Developer\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/users/{{userId}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "users",
            "{{userId}}"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Delete User",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 204\", function () {\r",
              "    pm.response.to.have.status(204);\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{token}}",
              "type": "string"
            }
          ]
        },
        "method": "DELETE",
        "header": [
          {
            "key": "x-api-key",
            "value": "reqres_8d68828817d546fa87662ff2761f343d",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{baseUrl}}/api/users/{{userId}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "users",
            "{{userId}}"
          ]
        }
      },
      "response": []
    }
  ]
}